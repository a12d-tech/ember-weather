!function(){window.EmberWeather=Ember.Application.create()}(),function(){Ember.Handlebars.helper("current-date",function(){var a=moment().date(),b=moment().format("MMM"),c=moment().year(),d="<div  id='d' class='col-md-6'><span>"+a+"</span></div><div id='m-y' class='col-md-6'><span id='m'>"+b+"</span><br/><span id='y'>"+c+"</span></div>";return new Handlebars.SafeString(d)}),Ember.Handlebars.helper("format-date",function(a){return moment.unix(a).calendar().split(" at ")[0]}),Ember.Handlebars.helper("format-temp",function(a){return Math.round(a)}),Ember.Handlebars.helper("iconW",function(a){var b={"01d":"<i class='wi wi-day-sunny'></i>","01n":"<i class='wi wi-night-clear'></i>","02d":"<i class='wi wi-day-cloudy'></i>","02n":"<i class='wi wi-night-cloudy'></i>","03d":"<i class='wi wi-cloudy'></i>","03n":"<i class='wi wi-cloudy'></i>","04d":"<i class='wi wi-cloudy'></i>","04n":"<i class='wi wi-cloudy'></i>","09d":"<i class='wi wi-showers'></i>","09n":"<i class='wi wi-showers'></i>","10d":"<i class='wi wi-day-rain'></i>","10n":"<i class='wi wi-night-rain'></i>","11d":"<i class='wi wi-thunderstorm'></i>","11n":"<i class='wi wi-thunderstorm'></i>","13d":"<i class='wi wi-day-snow'></i>","13n":"<i class='wi wi-night-snow'></i>","50d":"<i class='wi wi-fog'></i>","50n":"<i class='wi wi-fog'></i>"};return new Handlebars.SafeString(b[a])})}(),function(){EmberWeather.GoogleMapComponent=Ember.Component.extend({lng:"",lat:"",mapUrl:function(){var a=this.get("lng"),b=this.get("lat");return"http://maps.googleapis.com/maps/api/staticmap?center="+b+","+a+"&zoom=12&size=341x300&sensor=true"}.property("lng","lat")})}(),function(){EmberWeather.ApplicationController=Ember.Controller.extend({cityName:"",actions:{search:function(){var a=this.get("cityName");this.transitionToRoute("search",a),this.set("cityName","")}}})}(),function(){EmberWeather.CityController=Ember.ObjectController.extend({actions:{createCity:function(){function a(a){tmp=a.get("content").get("firstObject").id,e.transitionToRoute("forecasts",tmp)}function b(){f=d.createRecord("city",{formatted_location:c.formatted_address,lat:c.geometry.location.lat,lng:c.geometry.location.lng}),f.save(),e.transitionToRoute("forecasts",f)}var c=this.get("model"),d=this.get("store"),e=this,f=this.store.find("city",{formatted_location:c.formatted_address});f.then(a,b)}}})}(),function(){EmberWeather.ForecastsController=Ember.ObjectController.extend({city:function(){return this.get("model.city")}.property("model.city"),today:function(){return this.get("model.list").get("firstObject")}.property("model.list"),forecast:function(){return this.get("model.list").slice(1)}.property("model.list")})}(),function(){EmberWeather.ApplicationStore=DS.Store.extend(),EmberWeather.ApplicationAdapter=DS.LSAdapter.extend({namespace:"ember-weather"})}(),function(){EmberWeather.City=DS.Model.extend({formatted_location:DS.attr("string"),lat:DS.attr("number"),lng:DS.attr("number"),createdAt:DS.attr("string",{defaultValue:function(){return new Date}})})}(),function(){EmberWeather.CitiesRoute=Ember.Route.extend({model:function(){return this.store.find("city")}})}(),function(){EmberWeather.CityRoute=Ember.Route.extend({model:function(a){return this.store.find("city",a.id)}})}(),function(){EmberWeather.ForecastsRoute=Ember.Route.extend({model:function(){var a=this.modelFor("city");return Ember.$.getJSON("http://api.openweathermap.org/data/2.5/forecast/daily?lat="+a.get("lat")+"&lon="+a.get("lng")+"&mode=json&units=metric&cnt=7").then(function(a){return a})}})}(),function(){EmberWeather.IndexRoute=Ember.Route.extend({})}(),function(){EmberWeather.SearchRoute=Ember.Route.extend({model:function(a){return Ember.$.getJSON("https://maps.googleapis.com/maps/api/geocode/json?address="+a.location).then(function(a){switch(a.status){case"OK":return a.results}})}})}(),function(){EmberWeather.ForecastView=Ember.View.extend({templateName:"forecast",contentWithClassName:function(){return this.get("content").map(function(a,b){return{day:a,classNameParent:"col-md-2 forecast forecast-"+b,className:"unit box frcst-"+b}})}.property("content.@each")})}(),function(){EmberWeather.Router.map(function(){this.route("index",{path:"/"}),this.route("search",{path:"/search/:location"}),this.resource("cities",{path:"/cities"}),this.resource("city",{path:"/cities/:id"},function(){this.resource("forecasts")})})}();